---
layout:     post
title:      算法与数据结构 (Algorithms and Data Structures)
subtitle:   数组与列表(2)
date:       2021-9-13
author:     月月鸟
header-img: img/tag-bg.jpg
catalog: true
tags:
    - Data Structure
---

# 1. 定义
**数组（Array）**：数组是一个固定大小的集合，其中每个元素都是相同类型的。数组的大小在创建时定义，并且通常不能更改。
**列表（List）**：列表是一种动态大小的集合，可以包含不同类型的元素。在许多编程语言中，列表的大小可以动态调整。

---

# 2. 数组常用操作

## 2.1 初始化

```python
# 创建一个空列表
my_list = []

# 创建一个带有初始值的列表
my_list = [1, 2, 3, 4, 5]
```

### 2.2 访问元素

```python
# 访问第一个元素
first_element = my_list[0]

# 访问最后一个元素
last_element = my_list[-1]
```

## 2.3 插入元素

```python
# 在索引位置 2 插入元素 10
def insert_element(lst, index, value):
    if index > len(lst):
        index = len(lst)
    lst += [None]  # 扩大列表大小
    for i in range(len(lst) - 1, index, -1):
        lst[i] = lst[i - 1]
    lst[index] = value

my_list = [1, 2, 3, 4, 5]
insert_element(my_list, 2, 10)  # 在索引位置 2 插入元素 10
```

## 2.4 删除元素

```python
# 删除指定索引位置的元素
def delete_element(lst, index):
    if index < len(lst):
        for i in range(index, len(lst) - 1):
            lst[i] = lst[i + 1]
        lst.pop()  # 删除最后一个元素，列表长度减少

my_list = [1, 2, 10, 3, 4, 5]
delete_element(my_list, 2)  # 删除索引位置 2 的元素

# 删除第一个匹配的指定值
def remove_value(lst, value):
    for i in range(len(lst)):
        if lst[i] == value:
            delete_element(lst, i)
            break

my_list = [1, 2, 10, 3, 4, 5]
remove_value(my_list, 10)  # 删除值为 10 的第一个元素
```

## 2.5 遍历

```python
# 使用 for 循环遍历
def print_elements(lst):
    for element in lst:
        print(element)

my_list = [1, 2, 3, 4, 5]
print_elements(my_list)

# 使用列表推导式遍历并操作
def square_elements(lst):
    return [x * x for x in lst]

squared_list = square_elements(my_list)
```

## 2.6 查找元素

```python
# 查找元素的位置
def find_index(lst, value):
    for i in range(len(lst)):
        if lst[i] == value:
            return i
    return -1  # 如果未找到则返回 -1

my_list = [1, 2, 3, 4, 5]
index = find_index(my_list, 3)  # 查找值为 3 的元素的位置

# 判断元素是否在列表中
def contains(lst, value):
    return find_index(lst, value) != -1

exists = contains(my_list, 3)  # 判断值为 3 的元素是否在列表中
```

---

## 3. 列表常用操作

### 3.1. 初始化列表

列表可以通过两种方式初始化：

```python
# 无初始值
nums1 = []

# 有初始值
nums = [1, 3, 2, 5, 4]
```

### 3.2. 访问元素

列表允许高效地访问和更新元素：

```python
# 访问元素
num = nums[1]  # 访问索引 1 处的元素

# 更新元素
nums[1] = 0    # 将索引 1 处的元素更新为 0
```

### 3.3. 插入与删除元素

列表支持灵活地添加和删除元素：

```python
# 清空列表
nums.clear()

# 在尾部添加元素
nums.append(1)
nums.append(3)
nums.append(2)
nums.append(5)
nums.append(4)

# 在中间插入元素
nums.insert(3, 6)  # 在索引 3 处插入数字 6

# 删除元素
nums.pop(3)        # 删除索引 3 处的元素
```

### 3.4. 遍历列表

遍历列表元素的几种方式：

```python
# 通过索引遍历列表
count = 0
for i in range(len(nums)):
    count += nums[i]

# 直接遍历列表元素
for num in nums:
    count += num
```

### 3.5. 拼接列表

将两个列表拼接在一起：

```python
# 拼接两个列表
nums1 = [6, 8, 7, 10, 9]
nums += nums1  # 将列表 nums1 拼接到 nums 之后
```

### 3.6. 排序列表

对列表进行排序：

```python
# 排序列表
nums.sort()  # 排序后，列表元素从小到大排列
```

### 3.7. 列表实现

为了加深对列表工作原理的理解，可以实现一个简易版的动态数组。以下是一个简单的实现示例：

```python
class MyList:
    """列表类"""

    def __init__(self):
        """构造方法"""
        self._capacity = 10  # 列表容量
        self._arr = [0] * self._capacity  # 数组（存储列表元素）
        self._size = 0  # 列表长度（当前元素数量）
        self._extend_ratio = 2  # 每次列表扩容的倍数

    def size(self) -> int:
        """获取列表长度（当前元素数量）"""
        return self._size

    def capacity(self) -> int:
        """获取列表容量"""
        return self._capacity

    def get(self, index: int) -> int:
        """访问元素"""
        if index < 0 or index >= self._size:
            raise IndexError("索引越界")
        return self._arr[index]

    def set(self, num: int, index: int):
        """更新元素"""
        if index < 0 or index >= self._size:
            raise IndexError("索引越界")
        self._arr[index] = num

    def add(self, num: int):
        """添加元素"""
        if self._size >= self._capacity:
            self._resize()
        self._arr[self._size] = num
        self._size += 1

    def _resize(self):
        """扩容"""
        new_capacity = self._capacity * self._extend_ratio
        new_arr = [0] * new_capacity
        for i in range(self._size):
            new_arr[i] = self._arr[i]
        self._arr = new_arr
        self._capacity = new_capacity
```
---
## 4. 数组与列表的优缺点

## 4.1 数组

### 优点

1. **访问速度快**：数组的元素在内存中是连续存储的，因此可以通过索引在 \(O(1)\) 时间内快速访问和修改元素。
2. **内存效率高**：由于数组元素在内存中连续存储，减少了内存碎片，通常比链表更节省内存。
3. **简单实现**：数组的实现简单且直接，通常只需要一个固定大小的内存块。

### 缺点

1. **固定大小**：数组在创建时需要定义固定大小，不能动态调整。如果数组的初始大小设置不当，可能会导致内存浪费或不足。
2. **插入和删除操作昂贵**：在数组中插入或删除元素通常需要移动大量元素，时间复杂度为 \(O(n)\)，尤其是在数组的中间位置。
3. **空间浪费**：为了避免频繁扩容，数组可能会被分配较大的空间，这会导致内存浪费。

## 4.2 列表（动态数组）

### 优点

1. **动态扩容**：动态数组（如 Python 的 `list`、Java 的 `ArrayList`）可以根据需要自动扩展容量，避免了固定大小数组的限制。
2. **灵活性强**：动态数组支持动态添加、删除和修改元素，操作相对灵活。
3. **相对较快的访问速度**：与普通数组一样，动态数组的元素存储在内存中是连续的，可以在 \(O(1)\) 时间内访问。

### 缺点

1. **扩容开销**：当动态数组需要扩容时，通常需要创建一个新的更大的数组，并将旧数组的元素复制到新数组中，这个过程可能需要 \(O(n)\) 的时间。
2. **内存使用不稳定**：动态数组可能在扩容过程中占用更多内存，可能导致内存碎片和浪费。
3. **插入和删除操作的复杂性**：虽然动态数组在尾部插入元素的操作较快，但在中间插入或删除元素时，仍需要移动其他元素，时间复杂度为 \(O(n)\)。

---

## 5. 总结

- **数组**：适合需要快速随机访问且元素数量固定的场景。由于固定大小，数组在插入和删除操作上效率较低。
- **动态数组**：适合需要灵活调整大小和频繁操作的场景。虽然扩容和插入/删除的开销较大，但在实际应用中，动态数组通常能提供足够的性能和灵活性。